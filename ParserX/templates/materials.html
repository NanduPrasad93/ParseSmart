{% extends 'admin_header.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Materials</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        /* Global styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
        }
        
        h1 {
            text-align: center;
            color: #333;
            padding: 20px;
            background-color: #0056b3;
            color: white;
            margin: 0;
        }

        /* Center the form on the page */
        .form-container {
            max-width: 600px;
            margin: 40px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .form-container label {
            font-weight: bold;
            margin-bottom: 8px;
            display: block;
            color: #333;
        }

        .form-container select,
        .form-container input[type="file"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .form-container select:focus,
        .form-container input[type="file"]:focus {
            border-color: #0056b3;
        }

        .form-container button {
            background-color: #0056b3;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
        }

        .form-container button:hover {
            background-color: #004494;
        }

        .form-container .form-group {
            margin-bottom: 20px;
        }

        .form-container .form-group:last-child {
            margin-bottom: 0;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .form-container {
                padding: 15px;
            }

            .form-container button {
                font-size: 14px;
            }
        }

        /* Add a subtle border around the form */
        .form-container {
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>

    <h1>Study Materials Upload</h1>

    <div class="form-container">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            
            <!-- Category Dropdown -->
            <div class="form-group">
                <label for="category-dropdown">Category:</label>
                {{ form.Category }}  <!-- This will render the category dropdown -->
            </div>

            <!-- Topic Dropdown (Initially empty, will be populated by JavaScript) -->
            <div class="form-group">
                <label for="topic-dropdown">Topic:</label>
                {{ form.Topic }}  <!-- This will render the topic dropdown dynamically -->
            </div>

            <!-- File Upload -->
            <div class="form-group">
                <label for="file-upload">Upload File:</label>
                {{ form.File_upload }}  <!-- This will render the file upload field -->
            </div>

            <button type="submit">Submit</button>
        </form>
    </div>

    <script type="text/javascript">
        // Predefined topics for each category
        const topics = {
            'UPSC': ['Indian Polity', 'History of India', 'Geography', 'Economy', 'Environment', 'Science and Technology', 'Current Affairs', 'World History', 'Indian Society', 'Internal Security', 'Disaster Management', 'Ethics, Integrity, and Aptitude','International Relations','Government Schemes and Policies','Environmental Issues','Science and Research','Social Issues','Agriculture','Infrastructure','Culture and Heritage','Public Administration','Defence and Security'],
            'SSC': ['History','Geography','Polity','Economy','Science and Technology','Environment', 'Current Affairs','Culture','Quantitative Aptitude','General Intelligence and Reasoning','English Language','General Science'],
            'IBPS': ['Reasoning Ability','Quantitative Aptitude','English Language','General Awareness','Computer Knowledge'],
            'CBSE': ['General Awareness','Quantitative Aptitude','Reasoning Ability','English Language','Computer Knowledge','Educational Psychology','Teaching Methodology','Subject-Specific Knowledge'],
            'RBI': ['Economic and Social Issues','Finance and Management','Quantitative Aptitude','Reasoning Ability','English Language','General Awareness','Computer Knowledge'],
            'RRB': ['General Awareness','Arithmetic','General Intelligence and Reasoning','General Science','Technical Subjects','Current Affairs','Computer Knowledge'],
            'DEFENCE': [ 'General Awareness','Current Affairs','Quantitative Aptitude','Reasoning Ability','English Language','General Science','History and Geography','National Security Issues','Military Technology','Defense Policies and Strategies']
        };
    
        // When category changes, update the topic dropdown
        $('#category-dropdown').change(function() {
            var category = $(this).val();  // Get the selected category
    
            // Get the topics for the selected category or use an empty array if not found
            var selectedTopics = topics[category] || [];
    
            // Update the topic dropdown with new options
            var topicDropdown = $('#topic-dropdown');
            topicDropdown.empty();  // Clear previous topics
            topicDropdown.append('<option value="">-- Select Topic --</option>');  // Add default option
    
            // Add new options based on the selected category
            $.each(selectedTopics, function(index, topic) {
                topicDropdown.append('<option value="' + topic + '">' + topic + '</option>');
            });
        });
    </script>
    
</body>
</html>
{% endblock %}
